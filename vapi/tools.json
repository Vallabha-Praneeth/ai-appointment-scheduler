[{"id":"78042c1b-a798-4954-8894-a388aaa2363a","createdAt":"2025-11-14T09:52:22.482Z","updatedAt":"2025-11-14T09:52:22.482Z","type":"function","function":{"name":"check_availability_tool","strict":false,"description":"Check the next available appointment slots. Returns up to 5 available time slots based on the calendar and business hours (10 AM - 6 PM).\n\nUse this tool when the user asks:\n- 'What times are available?'\n- 'When can I schedule an appointment?'\n- 'Show me available slots'\n- 'What's your availability?'\n- 'When are you free?'\n\nThe tool will return formatted time slots that you should read naturally to the user. For example:\n'I have availability on Monday, Nov 15 at 2:00 PM, Monday at 3:30 PM, Tuesday at 10:00 AM...'","parameters":{"type":"object","properties":{"duration":{"description":"Desired appointment duration in minutes. Common values: 30, 60, 90, 120. Use 60 unless user requests a specific service type with different duration.","type":"integer","default":60},"timezone":{"description":"IANA timezone (e.g., America/Chicago, America/New_York, America/Los_Angeles). Use America/Chicago unless user specifies a different timezone.","type":"string","default":"America/Chicago"},"startFrom":{"description":"Optional: Start searching from this date/time in ISO 8601 format (e.g., 2025-11-15T14:00:00-06:00). If not provided, starts from current time.","type":"string"},"slotsCount":{"description":"Number of available slots to return (1-10). Default is 5.","type":"integer","default":5},"service_type":{"description":"Type of service. This helps determine appropriate slot duration. Support: 30-60min, Maintenance: 45-90min, Consultation: 60-90min, Onsite: 60-120min.","type":"string","enum":["general support","maintenance","consultation","onsite","emergency"],"default":"consultation"}},"required":[]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/check-availability","headers":{"Content-Type":"application/json"}}},{"id":"96fd301f-2dbe-47da-8101-bf3ddf379a5a","createdAt":"2025-11-12T09:12:07.941Z","updatedAt":"2025-11-12T09:12:07.941Z","type":"function","function":{"name":"group_booking_tool","strict":true,"description":"Book appointments for multiple people. Supports three modes: (1) SHARED - One appointment with multiple attendees like team meeting. (2) INDIVIDUAL_SAME_SLOT - Same time slot but separate calendar events for each person like group training. (3) SEPARATE - Different time slots for different people. Before calling collect all attendee names and phone numbers, confirm the booking type with the user, verify the time slots are within business hours 10 AM to 6 PM, and get explicit yes confirmation before proceeding.","parameters":{"type":"object","properties":{"confirm":{"description":"Must be yes to proceed with booking. Ask user to confirm.","type":"string","enum":["yes","no"]},"bookingType":{"description":"SHARED = one event with all attendees together. SEPARATE = different times for each person. INDIVIDUAL_SAME_SLOT = same time but individual events for each person.","type":"string","enum":["shared","separate","individual_same_slot"]},"sharedBooking":{"description":"Required when bookingType is shared or individual_same_slot","type":"object","required":["title","startIso","endIso","timezone","service_type","attendees"],"properties":{"notes":{"description":"Additional notes or special requests","type":"string","default":""},"title":{"description":"Title of the appointment","type":"string"},"endIso":{"description":"End time in ISO 8601 format","type":"string"},"startIso":{"description":"Start time in ISO 8601 format","type":"string"},"timezone":{"description":"IANA timezone","type":"string","default":"America/Chicago"},"attendees":{"description":"List of all people for this group booking","type":"array","items":{"type":"object","required":["name","phone"],"properties":{"name":{"description":"Full name of attendee","type":"string"},"email":{"description":"Optional email address","type":"string","default":""},"phone":{"description":"Phone in E.164 format","type":"string"}}},"maxItems":10,"minItems":2},"service_type":{"description":"Type of service being requested","type":"string","enum":["general support","maintenance","consultation","onsite","emergency"]}}},"separateBookings":{"description":"Required when bookingType is separate. Each item is a different appointment.","type":"array","items":{"type":"object","required":["title","startIso","endIso","timezone","name","phone","service_type"],"properties":{"name":{"description":"Name of the person for this appointment","type":"string"},"email":{"description":"Optional email","type":"string","default":""},"notes":{"type":"string","default":""},"phone":{"description":"Phone in E.164 format","type":"string"},"title":{"description":"Title of this specific appointment","type":"string"},"endIso":{"description":"End time in ISO 8601 format","type":"string"},"startIso":{"description":"Start time in ISO 8601 format","type":"string"},"timezone":{"description":"IANA timezone","type":"string","default":"America/Chicago"},"service_type":{"type":"string","enum":["general support","maintenance","consultation","onsite","emergency"]}}},"maxItems":10,"minItems":2}},"required":["bookingType","confirm"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/group-booking","headers":{"Content-Type":"application/json"}}},{"id":"da8f8d98-221e-4a14-94e4-2435224a5eb4","createdAt":"2025-11-05T12:50:43.995Z","updatedAt":"2025-11-05T12:50:43.995Z","type":"function","function":{"name":"recover_tool","strict":true,"description":"Call this if the call disconnects mid-flow. Pass what you know so the system can send the correct follow-up.","parameters":{"type":"object","properties":{"name":{"type":"string"},"carry":{"description":"Partial booking info if we had it (title, startIso, endIso, timezone).","type":"object","properties":{"title":{"type":"string"},"endIso":{"type":"string"},"startIso":{"type":"string"},"timezone":{"type":"string"}}},"email":{"type":"string"},"phone":{"description":"Caller phone (E.164 if possible)","type":"string"},"stage":{"description":"Where the flow dropped.","type":"string","enum":["new","confirm","reschedule","cancel"]},"bookingId":{"description":"Known Google Calendar event id, if any","type":"string"}},"required":["stage"]}},"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/recover","headers":{"Content-Type":"application/json"}}},{"id":"90091906-a3a3-43e9-86b4-1ec9d70aeb4e","createdAt":"2025-11-04T09:41:02.185Z","updatedAt":"2025-11-05T10:52:33.488Z","type":"function","function":{"name":"lookup_tool","strict":true,"description":"Provide either phone or email. If neither is known, ask the user for one.","parameters":{"type":"object","properties":{"email":{"description":"Email used when booking","type":"string"},"phone":{"description":"Phone number used when booking","type":"string"},"bookingId":{"description":"Exact Google Calendar event id if known","type":"string"},"rangeEndIso":{"description":"Optional search window end (ISO)","type":"string"},"rangeStartIso":{"description":"Optional search window start (ISO)","type":"string"}},"required":[]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi-lookup","headers":{"Content-Type":"application/json"}}},{"id":"1de0d2dd-c744-4607-8bff-bdef102267f5","createdAt":"2025-11-04T09:35:30.518Z","updatedAt":"2025-11-05T09:56:51.667Z","type":"function","function":{"name":"cancel_tool","strict":true,"description":"Use this tool to cancel an appointment only when bookingId is already provided or known.\nIf the user says “cancel booking ID …”, do not ask for phone/email.\nFirst ask: “Please confirm you want to cancel booking ID ____ by replying yes.”\nOnly when the user replies “yes”, call this tool with { bookingId, confirm: \"yes\" }.\nIf no bookingId is provided, ask for phone/email first and call lookup_tool.\nNever ask for phone/email after a bookingId is given.","parameters":{"type":"object","properties":{"phone":{"description":"Phone number used when booking","type":"string"},"reason":{"description":"Optional reason provided by caller","type":"string"},"confirm":{"description":"Must be 'yes' to proceed with cancellation","type":"string","enum":["yes"]},"bookingId":{"description":"Event ID to cancel (preferred if available)","type":"string","default":""}},"required":["confirm","bookingId"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/cancel","headers":{"Content-Type":"application/json"}}},{"id":"e3e93618-65cc-430e-96a1-99e96c97a6ab","createdAt":"2025-11-04T09:32:33.595Z","updatedAt":"2025-11-08T04:49:04.613Z","type":"function","function":{"name":"reschedule_tool","strict":true,"parameters":{"type":"object","properties":{"phone":{"description":"Phone number used to identify the existing appointment (fallback if no bookingId)","type":"string"},"timezone":{"description":"IANA timezone, e.g., America/Chicago\n","type":"string","default":""},"bookingId":{"description":"Exact Google Calendar event id, if known (preferred)","type":"string","default":""},"newEndIso":{"description":"New appointment end time in ISO format","type":"string"},"newStartIso":{"description":"New appointment start time in ISO format","type":"string"}},"required":["newStartIso","newEndIso","bookingId","timezone"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/reschedule"}},{"id":"0110b0d0-50db-4594-b468-8646899301bc","createdAt":"2025-10-04T05:42:12.841Z","updatedAt":"2025-11-08T05:26:45.384Z","type":"function","function":{"name":"function_tool","strict":true,"description":"Send JSON with title, start, end, timezone, attendees, and notes.\nThe tool will respond with whether the appointment was booked, if more info is needed, or if no slot is available. When you call bookAppointment, Webhook returns JSON:\n\n{\"result\":\"booked|need_more_info|no_free_slot|error\",\n\"slot\":{\"start\":\"<ISO>\",\"end\":\"<ISO>\",\"timezone\":\"America/Chicago\"},\n\"title\":\"<str>\",\"bookingId\":\"<id>\",\"calendarUrl\":\"<url>\",\n\"notes\":\"<str>\",\n\"alternatives\":[{\"start\":\"<ISO>\",\"end\":\"<ISO>\",\"timezone\":\"America/Chicago\"}],\n\"reason\":\"<str>\"}\n\nHandle:\n- booked → confirm title/date/time; end.\n- need_more_info → ask only for fields named in reason.\n- no_free_slot → read 1–2 items from alternatives, ask user to pick, then call tool again with chosen slot.\n- error → apologize and suggest trying later.","parameters":{"type":"object","properties":{"name":{"description":"Caller full name","type":"string"},"email":{"description":"","type":"string","default":""},"notes":{"description":"Extra context","type":"string","default":""},"phone":{"description":"Caller phone in E.164 (e.g., +12145550123)","type":"string"},"title":{"description":"Title of the appointment","type":"string"},"endIso":{"description":"End datetime in ISO 8601 (e.g., 2025-10-05T11:00:00-05:00)","type":"string","default":""},"confirm":{"description":"User confirmation for the chosen slot; send \\\"yes\\\" when user explicitly confirms.","type":"string","enum":["yes","no"],"default":""},"startIso":{"description":"Start datetime in ISO 8601 (e.g., 2025-10-05T10:30:00-05:00)","type":"string","default":""},"timezone":{"description":"IANA timezone","type":"string","default":"America/Chicago"},"attendees":{"description":"Comma-separated attendee emails (optional)","type":"string"},"altConfirm":{"description":"Confirm alternative slot?","type":"string","enum":["yes","no"]},"service_type":{"description":"Requested service category","type":"string","enum":["general support","maintenance","consultation","onsite","emergency"]}},"required":["title","startIso","endIso","timezone","name","phone","service_type","email","confirm"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/call"}}]