[{"id":"da8f8d98-221e-4a14-94e4-2435224a5eb4","createdAt":"2025-11-05T12:50:43.995Z","updatedAt":"2025-11-05T12:50:43.995Z","type":"function","function":{"name":"recover_tool","strict":true,"description":"Call this if the call disconnects mid-flow. Pass what you know so the system can send the correct follow-up.","parameters":{"type":"object","properties":{"name":{"type":"string"},"carry":{"description":"Partial booking info if we had it (title, startIso, endIso, timezone).","type":"object","properties":{"title":{"type":"string"},"endIso":{"type":"string"},"startIso":{"type":"string"},"timezone":{"type":"string"}}},"email":{"type":"string"},"phone":{"description":"Caller phone (E.164 if possible)","type":"string"},"stage":{"description":"Where the flow dropped.","type":"string","enum":["new","confirm","reschedule","cancel"]},"bookingId":{"description":"Known Google Calendar event id, if any","type":"string"}},"required":["stage"]}},"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/recover","headers":{"Content-Type":"application/json"}}},{"id":"e5f4a45d-a465-4eea-a087-4828d264aa06","createdAt":"2025-11-05T11:28:49.934Z","updatedAt":"2025-11-05T11:28:49.934Z","type":"sms","function":{"name":"send_text_tool"},"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12"},{"id":"90091906-a3a3-43e9-86b4-1ec9d70aeb4e","createdAt":"2025-11-04T09:41:02.185Z","updatedAt":"2025-11-05T10:52:33.488Z","type":"function","function":{"name":"lookup_tool","strict":true,"description":"Provide either phone or email. If neither is known, ask the user for one.","parameters":{"type":"object","properties":{"email":{"description":"Email used when booking","type":"string"},"phone":{"description":"Phone number used when booking","type":"string"},"bookingId":{"description":"Exact Google Calendar event id if known","type":"string"},"rangeEndIso":{"description":"Optional search window end (ISO)","type":"string"},"rangeStartIso":{"description":"Optional search window start (ISO)","type":"string"}},"required":[]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi-lookup","headers":{"Content-Type":"application/json"}}},{"id":"1de0d2dd-c744-4607-8bff-bdef102267f5","createdAt":"2025-11-04T09:35:30.518Z","updatedAt":"2025-11-05T09:56:51.667Z","type":"function","function":{"name":"cancel_tool","strict":true,"description":"Use this tool to cancel an appointment only when bookingId is already provided or known.\nIf the user says “cancel booking ID …”, do not ask for phone/email.\nFirst ask: “Please confirm you want to cancel booking ID ____ by replying yes.”\nOnly when the user replies “yes”, call this tool with { bookingId, confirm: \"yes\" }.\nIf no bookingId is provided, ask for phone/email first and call lookup_tool.\nNever ask for phone/email after a bookingId is given.","parameters":{"type":"object","properties":{"phone":{"description":"Phone number used when booking","type":"string"},"reason":{"description":"Optional reason provided by caller","type":"string"},"confirm":{"description":"Must be 'yes' to proceed with cancellation","type":"string","enum":["yes"]},"bookingId":{"description":"Event ID to cancel (preferred if available)","type":"string","default":""}},"required":["confirm","bookingId"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/cancel","headers":{"Content-Type":"application/json"}}},{"id":"e3e93618-65cc-430e-96a1-99e96c97a6ab","createdAt":"2025-11-04T09:32:33.595Z","updatedAt":"2025-11-05T07:56:14.706Z","type":"function","function":{"name":"reschedule_tool","parameters":{"type":"object","properties":{"phone":{"description":"Phone number used to identify the existing appointment (fallback if no bookingId)","type":"string"},"timezone":{"description":"IANA timezone, e.g., America/Chicago\n","type":"string","default":""},"bookingId":{"description":"Exact Google Calendar event id, if known (preferred)","type":"string","default":""},"newEndIso":{"description":"New appointment end time in ISO format","type":"string"},"newStartIso":{"description":"New appointment start time in ISO format","type":"string"}},"required":["newStartIso","newEndIso","bookingId","timezone"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/reschedule"}},{"id":"0110b0d0-50db-4594-b468-8646899301bc","createdAt":"2025-10-04T05:42:12.841Z","updatedAt":"2025-11-04T09:20:04.181Z","type":"function","function":{"name":"function_tool","strict":true,"description":"Send JSON with title, start, end, timezone, attendees, and notes.\nThe tool will respond with whether the appointment was booked, if more info is needed, or if no slot is available. When you call bookAppointment, Webhook returns JSON:\n\n{\"result\":\"booked|need_more_info|no_free_slot|error\",\n\"slot\":{\"start\":\"<ISO>\",\"end\":\"<ISO>\",\"timezone\":\"America/Chicago\"},\n\"title\":\"<str>\",\"bookingId\":\"<id>\",\"calendarUrl\":\"<url>\",\n\"notes\":\"<str>\",\n\"alternatives\":[{\"start\":\"<ISO>\",\"end\":\"<ISO>\",\"timezone\":\"America/Chicago\"}],\n\"reason\":\"<str>\"}\n\nHandle:\n- booked → confirm title/date/time; end.\n- need_more_info → ask only for fields named in reason.\n- no_free_slot → read 1–2 items from alternatives, ask user to pick, then call tool again with chosen slot.\n- error → apologize and suggest trying later.","parameters":{"type":"object","properties":{"name":{"description":"Caller full name","type":"string"},"email":{"description":"","type":"string","default":""},"notes":{"description":"Extra context","type":"string","default":""},"phone":{"description":"Caller phone in E.164 (e.g., +12145550123)","type":"string"},"title":{"description":"Title of the appointment","type":"string"},"endIso":{"description":"End datetime in ISO 8601 (e.g., 2025-10-05T11:00:00-05:00)","type":"string","default":""},"confirm":{"description":"Confirm primary slot?","type":"string","enum":["yes","no"]},"startIso":{"description":"Start datetime in ISO 8601 (e.g., 2025-10-05T10:30:00-05:00)","type":"string","default":""},"timezone":{"description":"IANA timezone","type":"string","default":"America/Chicago"},"attendees":{"description":"Comma-separated attendee emails (optional)","type":"string"},"altConfirm":{"description":"Confirm alternative slot?","type":"string","enum":["yes","no"]},"service_type":{"description":"Requested service category","type":"string","enum":["general support","maintenance","consultation","onsite","emergency"]}},"required":["title","startIso","endIso","timezone","name","phone","service_type","email"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/call"}},{"id":"89b4b76a-3c31-4701-930f-a7bed0e6d809","createdAt":"2025-09-19T08:32:04.447Z","updatedAt":"2025-10-03T09:01:44.793Z","type":"function","function":{"name":"bookAppointment","description":"Send JSON with title, start, end, timezone, attendees, and notes.\nThe tool will respond with whether the appointment was booked, if more info is needed, or if no slot is available. When you call bookAppointment, Webhook returns JSON:\n\n{\"result\":\"booked|need_more_info|no_free_slot|error\",\n\"slot\":{\"start\":\"<ISO>\",\"end\":\"<ISO>\",\"timezone\":\"Asia/Kolkata\"},\n\"title\":\"<str>\",\"bookingId\":\"<id>\",\"calendarUrl\":\"<url>\",\n\"notes\":\"<str>\",\n\"alternatives\":[{\"start\":\"<ISO>\",\"end\":\"<ISO>\",\"timezone\":\"Asia/Kolkata\"}],\n\"reason\":\"<str>\"}\n\nHandle:\n- booked → confirm title/date/time; end.\n- need_more_info → ask only for fields named in reason.\n- no_free_slot → read 1–2 items from alternatives, ask user to pick, then call tool again with chosen slot.\n- error → apologize and suggest trying later.\n\n","parameters":{"type":"object","properties":{"end":{"description":"End datetime (ISO format)","type":"string","default":""},"name":{"description":"Caller full name","type":"string","default":""},"notes":{"description":"","type":"string","default":""},"phone":{"description":"Caller phone in E.164 (e.g. +919876543210)","type":"string","default":""},"start":{"description":"Start datetime (ISO format, e.g. 2025-09-21T15:00:00+05:30)","type":"string","default":""},"title":{"description":"Title of the appointment","type":"string","default":""},"confirm":{"description":"","type":"string","enum":["[yes, no]"],"default":""},"timezone":{"description":"Timezone, default Asia/Kolkata","type":"string","default":""},"attendees":{"description":"List of attendee emails","type":"string","default":""},"altConfirm":{"description":"","type":"string","enum":["[yes, no]"],"default":""},"service_type":{"description":"","type":"string","enum":["[general support, maintenance, consultation, onsite, emergency]"],"default":""}},"required":["title","start","end","timezone","name","phone","service_type"]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook/vapi/call"}},{"id":"06b4201b-c717-4bdc-8fab-1c55f8d4d7d8","createdAt":"2025-09-19T04:29:06.307Z","updatedAt":"2025-09-19T04:38:41.136Z","type":"function","function":{"name":"weather_tool","description":"call this tool to get weather in a certain place.","parameters":{"type":"object","properties":{"place":{"description":"this is the city/place where you will get weather from.","type":"string","default":""}},"required":[]}},"messages":[{"type":"request-start","blocking":false}],"orgId":"db5415bc-b28a-407c-be48-dcc9869b0f12","server":{"url":"https://polarmedia.app.n8n.cloud/webhook-test/34034523-63ce-4f8d-8b71-0df0a4b51066"}}]